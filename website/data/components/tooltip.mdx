# Tooltip

A tooltip is a brief, informative message that appears when a user interacts with an element. Tooltips are usually
initiated when a button is focused or hovered.

## Features

- Show tooltip on hover and focus
- Hide tooltip on esc or pointer down
- Only one tooltip shows at a time
- Labeling support for screen readers via `aria-describedby`
- Custom show and hide delay support
- Matches native tooltip behavior with delay on hover of first tooltip and no delay on subsequent tooltips.

## Installation

To use the accordion machine in your project, install the respective package

<InstallSnippet package="@ui-machines/tooltip" />

```jsx
import * as Tooltip from "@ui-machines/tooltip"
```

<CodeSnippet id="tooltip/installation.mdx" />

## Usage

To get the tooltip working correct, you'll need to:

- Setup the tooltip portal, this is a shared container for all tooltips
- Add the `triggerProps`, and `tooltipProps` to the elements

<CodeSnippet id="tooltip/basic-usage.mdx" />

## Customizing the timings

The tooltip is designed to show after `1200ms` and hide after `500ms`. You can customize this by passing the `openDelay`
and `closeDelay` context properties.

```jsx
const [state, send] = useMachine(
  Tooltip.machine.withContext({
    openDelay: 500,
    closeDelay: 200,
  }),
)
```

<CodeSnippet id="tooltip/custom-timings.mdx" />

## Pointerdown behavior

By default, the tooltip will close when the pointer is down on its trigger. To prevent this behavior, pass the
`closeOnPointerDown` context property and set it to `false`.

```jsx
const [state, send] = useMachine(
  Tooltip.machine.withContext({
    closeOnPointerDown: false,
  }),
)
```

## Making the tooltip interactive

Tooltips are interactive by default. That means it'll remain open even the pointer leaves the trigger and move into the
tooltip's content.

To disabled this behavior, pass the `interactive` context property and set it to `false`.

> Disabling this will violate the
> [WCAG 2.1 success criterion 1.4.13](https://www.w3.org/TR/WCAG21/#content-on-hover-or-focus)

```jsx
const [state, send] = useMachine(
  Tooltip.machine.withContext({
    interactive: false,
  }),
)
```

<CodeSnippet id="tooltip/no-interactive.mdx" />

## Using custom labels

By default, the only content announced to them is whatever is in the tooltip. On some cases you may want the screen
readers to know more information about the trigger (e.g. a notifications system with count).

For this use-case, pass the `aria-label` context property and use the `labelProps` exposed in the tooltip's connect
function.

<CodeSnippet id="tooltip/custom-label.mdx" />
