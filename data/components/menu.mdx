# Menu

An accessible dropdown and context menu that is used to display a list of
actions or options that a user can choose.

<Showcase id="Menu" />

**Features**

- Support for single and nested menus.
- Support for items, labels, groups of items.
- Focus is fully managed using `aria-activedescendant` pattern.
- Typeahead to allow focusing items by typing text.
- Keyboard navigation support including arrow keys, home/end, page up/down.

## Installation

To use the menu machine in your project, install the framework agnostic menu
package and the binding for your framework.


```jsx
import * as menu from "@ui-machines/menu"
```

Next, you'll need to install the binding for your framework

<CodeSnippet id="menu/installation.mdx" />

## Usage

<CodeSnippet id="menu/usage.mdx" />

## Programmatic control of menu

To access the internal state and menus, you can use the `api` returned from the
`connect` function.

You'll get access to the following:

- `isOpen` — Whether the menu is open
- `open(...)` — Function to open the menu
- `close(...)` — Function to close the menu
- `value` — The value of the menu option groups
- `setValue(...)` — Function to set the value of a specific menu option group

<CodeSnippet id="menu/programmatic-control.mdx" />

## Grouping menu items

When the number of menu items get much, it might be useful to group related menu
items together. To achieve the`groupProps` provided by the menu machine's
connect function.

<CodeSnippet id="menu/grouping-items.mdx" />

## Nesting menus

To create submenus or nested menus:

- Destructure the `service` returned from the `useMachine` hook.
- Use the exposed `setParent` and `setChild` functions provided by the menu's
  connect function to assign the parent and child menus respectively.
- Merge properties from `triggerProps` and `getItemProps`.

<CodeSnippet id="menu/nested-menu.mdx" />

## Creating context menus

To show the menu when a trigger element is right-clicked, use the
`contextTriggerProps` provided by the menu's connect function.

Context menu's are also opened during a long-press of roughly `700ms` when the
pointer is pen or touch.

<CodeSnippet id="menu/context-menu.mdx" />

> ⚠️ Ensure you don't use both `contextTriggerProps` and `triggerProps`. Menus
> should have only one trigger type, that is, you should be using either a
> dropdown menu or a context menu. Not both
