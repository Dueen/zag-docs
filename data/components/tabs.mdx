# Tabs

An accessible tabs component that provides keyboard interactions and ARIA
attributes described in the WAI-ARIA Tabs Design Pattern.

<Showcase id="Tabs" />

**Features**

- Support for mouse, touch, and keyboard interactions on tabs.
- Support for LTR and RTL keyboard navigation.
- Support for disabled tabs.
- Follows the tabs ARIA pattern, semantically linking tabs and their associated
  tab panels.
- Focus management for tab panels without any focusable children

## Installation

To use the tabs machine in your project, run the following command in your
command line:

<CodeSnippet id="tabs/installation.mdx" />

This command will install the framework agnostic tabs logic and the reactive
utilities for your framework of choice.

Now you can use the tabs in your project!

```jsx
import * as tabs from "@ui-machines/tabs"
```

## Anatomy

To set up the tabs correctly, you'll need to understand its anatomy and how we
name its parts.

> Each part includes a `data-part` attribute to help identify them in the DOM.

On a high level, the tabs consists of:

- **Root**: The root container for the tablist and tab panels
- **Tab**: The button that activates a tab panel
- **Tab Panel**: The element that holds the content of the tab
- **Tab Indicator**: The element that holds the content of the tab
- **Tab Delete Button**: An optional element used to close or delete a tab

## Usage

Tabs consist of a tab list with one or more visually separated tabs. Each tab
has associated content, and only the selected tab's content is shown.

The tabs package exports two key functions:

- `machine` — The state machine logic for the tabs widget.
- `connect` — The function that translates the machine's state to JSX attributes
  and event handlers.

> You'll need to provide a unique `id` to the `useSetup` hook. This is used to
> ensure that every part has a unique identifier.

<CodeSnippet id="tabs/usage.mdx" />

## Setting the selected tab

To set the initially selected tab, pass the `value` property to the machine's
context.

```jsx {3}
const [state, send] = useMachine(
  tabs.machine.withContext({
    value: "tab-1",
  }),
)
```

Subsequently, you can use the `api.setValue` function to set the selected tab.

## Changing the orientation

The default orientation of the tabs is horizontal. To change the orientation,
set the `orientation` property in the machine's context to `"vertical"`.

```jsx {3}
const [state, send] = useMachine(
  tabs.machine.withContext({
    orientation: "vertical",
  }),
)
```

## Showing an indicator

To show an active indicator when a tab is selected, you add the
`tabIndicatorProps` object provided by the `connect` function.

<CodeSnippet id="tabs/with-indicator.mdx" />

## Disabling a tab

To disable a tab, set the `disabled` property in the `getTabProps` to `true`.

When a Tab is `disabled`, it is skipped during keyboard navigation and it is not
clickable.

```jsx
//...
<button {...api.getTabProps({ disabled: true })}></button>
//...
```

## Listening for events

- `onChange` — Callback invoked when the selected tab changes.
- `onFocus` — Callback invoked when the focused tab changes.

```jsx {3-8}
const [state, send] = useMachine(
  tabs.machine.withContext({
    onFocus(value) {
      console.log("focused tab:", value)
    },
    onChange(value) {
      console.log("selected tab:", value)
    },
  }),
)
```

## Manual tab activation

By default, the tab can be selected when the receive focus from either the
keyboard or pointer interaction. This is called "automatic tab activation".

The other approach is "manual tab activation" which means the tab is selected
with the Enter key or by clicking on the tab.

```jsx {3}
const [state, send] = useMachine(
  tabs.machine.withContext({
    activationMode: "manual",
  }),
)
```

## RTL Support

The tabs machine provides support right to left writing directions. In this
mode, the layout and keyboard interaction is flipped.

To enable RTL support, set the `dir` property in the machine's context to `rtl`.

```jsx {3}
const [state, send] = useMachine(
  tabs.machine.withContext({
    dir: "rtl",
  }),
)
```

## Methods and Properties

The accordion's connect method exposes the following methods:

- `value` — The value of the currently selected accordion.
- `setValue()` — Used to set the value of the accordion that will be expanded.

```jsx
const api = connect(state, send)

api.value
// => "tab-1"

api.setValue("tab-2") // => set active tab to "tab-2"
```

## Styling guide

### Selected state

When a tab is selected, a `data-selected` attribute is added to it.

```css
[data-part="tab"][data-selected] {
  /* Styles for selected tab */
}
```

### Disabled state

When a tab is disabled, a `data-disabled` attribute is added to it.

```css
[data-part="tab"][data-disabled] {
  /* Styles for disabled tab */
}
```

### Focused state

When a tab is focused, you the `:focus` or `:focus-visible` pseudo-class to
style it.

```css
[data-part="tab"]:focus {
  /* Styles for focused tab */
}
```

When any tab is focused, the tablist is given a `data-focus` attribute.

```css
[data-part="tablist"][data-focus] {
  /* Styles for when any tab is focused */
}
```

### Orientation styles

All the tab's parts are have the `data-orientation` attribute. You can use this
to set the style for the horizontal or vertical tabs.

```css
[data-part="tab"][data-orientation="(horizontal|vertical)"] {
  /* Styles for horizontal/vertical tabs */
}

[data-part="root"][data-orientation="(horizontal|vertical)"] {
  /* Styles for horizontal/vertical root */
}

[data-part="tab-indicator"][data-orientation="(horizontal|vertical)"] {
  /* Styles for horizontal/vertical tab-indicator */
}

[data-part="tablist"][data-orientation="(horizontal|vertical)"] {
  /* Styles for horizontal/vertical tab-indicator */
}
```

### The tab indicator

The tab indicator styles have CSS variables for the `transitionDuration` and
`transitionTimingFunction` defined in it.

The transition definition is applied when the selected tab changes to allow the
indicator move smoothly to the new selected tab.

```css
[data-part="tab-indicator"] {
  --transition-duration: 0.2s;
  --transition-timing-function: ease-in-out;
}
```

You'll also need to set the styles for the indicator to match your design.

```css
[data-part="tab-indicator"] {
  --transition-duration: 0.2s;
  --transition-timing-function: ease-in-out;
}
```
