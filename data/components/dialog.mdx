# Dialog

A dialog is a window overlaid on either the primary window or another dialog
window. Content behind a modal dialog is inert, meaning that users cannot
interact with it.

<Showcase id="Dialog" />

**Features**

- Supports modal and non-modal modes.
- Focus is automatically trapped and scrolling is blocked when modal.
- Manages screen reader announcements with Title and Description components.
- `Esc` closes the dialog automatically.

## Installation

To use the accordion machine in your project, install the respective package

```jsx
import * as dialog from "@ui-machines/dialog"
```

Next, you'll also need to install the framework binding

<CodeSnippet id="dialog/installation.mdx" />

## Usage

The dialog machine exposes the `triggerProps`, `overlayProps`, `contentProps`,
`titleProps`, `descriptionProps`, and `closeButtonProps` following properties to
get it working correctly:

<CodeSnippet id="dialog/usage.mdx" />

## Opening and Closing the dialog

By default, the dialog opens when the trigger is clicked. If you need
programmatically open the dialog from other elements, you can leverage the
exposed `open` and `close` methods.

```jsx
const api = dialog.connect(state, send)

// to open the dialog
api.open()

// to close the dialog
api.close()
```

## Managing focus within the dialog

When the dialog opens, it automatically sets focus on the first focusable
elements and traps focus within it, so that tabbing will be contrained within
it.

To control the element that should receive focus on open, pass the
`initialFocusEl` context (which can be an element or a function that returns an
element)

<CodeSnippet id="dialog/initial-focus.mdx" />

When it closes, it restores focus back to the trigger. To control the element
that should receive focus on close, pass the `finalFocusEl` context (which can
be an element or a function that returns an element)

<CodeSnippet id="dialog/final-focus.mdx" />

## Closing the dialog on overlay click

By default, the dialog closes when you click its overlay. You can set
`closeOnOutsideClick` to `false` if you want the modal to stay visible.

```jsx {3}
const [state, send] = useMachine(
  dialog.machine.withContext({
    closeOnOutsideClick: false,
  }),
)
```

## Controlling the scroll behavior

When the dialog is open, it prevents scrolling on the `body` element. To disable
this behavior, set the `preventScroll` context to `false`.

```jsx
const [state, send] = useMachine(
  dialog.machine.withContext({
    preventScroll: false,
  }),
)
```
