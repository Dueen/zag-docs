# Accordion

An accordion is a vertically stacked set of interactive headings that each contain a title, content snippet, or
thumbnail representing a section of content.

## Features

✅ Full keyboard navigation.

✅ Can expand one or multiple items.

✅ Can be controlled or uncontrolled.

## Installation

To use the accordion machine in your project, install the respective package

<InstallSnippet package="@ui-machines/accordion" />

```jsx
import * as Accordion from "@ui-machines/accordion"
```

If you're using React, you'll also need to install the `@ui-machines/react` binding

<CodeSnippet id="accordion/installation.mdx" />

## Usage

By default, only one item may be expanded and each accordion item uses a unique value, defined in the `getTriggerProps`
and `getPanelProps`.

The accordion package exports two key functions:

- `machine`: The state machine logic for the accordion widget as described in WAI-ARIA specification.
- `connect`: The function that translates the machine's state to DOM attributes and event handlers.

<CodeSnippet id="accordion/usage.mdx" />

## Opening multiple accordions at once

To allow multiple items to be expanded at once, set `multiple` to `true`. This mode implicitly sets `collapsible` to
`true` to also ensure that each accordion can be expanded.

```jsx
const [state, send] = useMachine(Accordion.machine, {
  context: { multiple: true },
})
```

## Opening specific accordions

To set the value of the accordion(s) that should be opened initially, use the `withContext(...)` pattern and pass the
`value` attribute.

```jsx
// for multiple accordions
const [state, send] = useMachine(
  Accordion.machine.withContext({
    multiple: true,
    value: ["home"],
  }),
)

// for single accordions
const [state, send] = useMachine(
  Accordion.machine.withContext({
    value: "home",
  }),
)
```

## Toggle each accordion item

To allow an expanded accordion item to be collapsed again by clicking on it. Set the context's `collapsible` property to
`true`.

> Note: If `multiple` is `true`, we internally set `collapsible` to be `true`.

```jsx
const [state, send] = useMachine(
  Accordion.machine.withContext({
    collapsible: true,
  }),
)
```

## Methods and Properties

The accordion's connect method exposes the following methods:

- `setValue`: Used to set the value of the accordion that will be expanded.
- `value`: The value of the currently selected accordion

```jsx
const accordion = connect(state, send)

accordion.value // => "item-1"
accordion.setValue("item-2")
```

## Styling the expanded state

When an accordion item is expanded, a `data-expanded` attribute is set on the accordion trigger element. When it closes,
the `data-expanded` attribute is removed.

```css
.accordion-trigger {
  background: white;
}

/* Styling the expanded state */
.accordion-trigger[data-expanded] {
  background: red;
}
```

> The style above assumes that you passed `.accordion-trigger` classname to the accordion trigger button element.
