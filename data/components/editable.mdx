# Editable

Editable is used for the inline renaming of some text. It appears as normal UI
text but transforms into a text input field when the user clicks on or focuses
it.

<Showcase id="Editable" />

**Features**

- Use custom controls for the editable.
- Pressing `Enter` commits the input value.
- Pressing `Esc` reverts the value.
- Activate edit mode by double-clicking or focusing on the preview text.
- Auto-resize input to fit content

## Installation

To use the editable machine in your project, run the following command in your
command line:

<CodeSnippet id="editable/installation.mdx" />

This command will install the framework agnostic editable logic and the reactive
utilities for your framework of choice.

Now you can use the editable in your project!

```jsx
import * as editable from "@ui-machines/editable"
```

## Anatomy

To set up the editable correctly, you'll need to understand its anatomy and how
we name its parts.

> Each part includes a `data-part` attribute to help identify them in the DOM.

On a high level, the editable consists of:

- **Root**: The root container for the editable.
- **Area**: The container that wraps the preview and input.
- **Preview**: The readonly element that displays the value.
- **Input**: The input used to edit the value.

If you're going to use custom controls to trigger edit, save and cancel, you'll
need these parts:

- **Edit Button**: The button to trigger the edit mode.
- **Submit Button**: The button to submit or save the value.
- **Cancel Button**: The button to cancel and revert to previous value.

## Usage

The editable package exports two key functions:

- `machine` — The state machine logic for the editable widget as described in
  WAI-ARIA specification.
- `connect` — The function that translates the machine's state to DOM attributes
  and event handlers for each part.

> You'll need to provide a unique `id` to the `useSetup` hook. We do this to
> ensure that the editable and its part has a unique identifier.

<CodeSnippet id="editable/usage.mdx" />

## Using custom controls

In some cases, you might need to use custom controls to toggle the edit and read
mode. We use the render prop pattern to provide access to the internal state of
the component.

<CodeSnippet id="editable/custom-controls.mdx" />

## Auto-resizing the editable

To auto-grow the editable as the content changes, pass the `autoResize: true`
property to the machine's context.

```jsx {3}
const [state, send] = useMachine(
  editable.machine.withContext({
    autoResize: true,
  }),
)
```

> **Please note that**, in this mode, the input and preview elements should not
> have any styles. Instead pass the styles to the "area" element.

### Setting a maxWidth

It's a common pattern to set a maximum of the editable as it auto-grows. To
achieve this, set the `maxWidth` property of the machine's context to the
desired value.

```jsx {3-4}
const [state, send] = useMachine(
  editable.machine.withContext({
    autoResize: true,
    maxWidth: "320px",
  }),
)
```

When the editable reaches the specified max-width, it'll clip the preview text
with an ellipsis.

## Editing with double click

The editable supports two modes of activating the "edit" state:

- when the preview part is focused (with pointer or keyboard).
- when the preview part is double-clicked.

To change the mode to "double-click", set the `activationMode: 'dblclick'`
property in the machine's context.

```jsx {3}
const [state, send] = useMachine(
  editable.machine.withContext({
    activationMode: "dblclick",
  }),
)
```

## Methods and Properties

The editable's connect method exposes the following methods:

- `isEditing` — Whether the editable is in the edit mode.
- `value` — The current value of the editable.
- `setValue()` — Function to set the value of the editable.
- `edit()` — Function to take the editable into edit mode.
- `cancel()` — Function to cancel the current editing session.
- `submit()` — Function to commit or save the value.

```jsx
const api = connect(state, send)

api.isEditing // => false
api.isValueEmpty // => false

api.edit()
api.setValue("Kakashi Sensei")
api.submit()
api.cancel()
```

## Styling guide

Earlier, we mentioned that each editable part has a `data-part` attribute added
to them to select and style them in the DOM.

### Focused state

When the editable is in the focused mode, we set a `data-focus` attribute on the
"area" part.

```css
[data-part="area"][data-focus] {
  /* CSS for the editable's focus state */
}
```

### Empty state

When the editable's value is empty, we set a `data-empty` attribute on the
"area" part.

```css
[data-part="area"][data-empty] {
  /* CSS for the editable's focus state */
}
```

### Disabled state

When the editable is disabled, we set a `data-disabled` attribute on the "area"
part.

```css
[data-part="area"][data-disabled] {
  /* CSS for the editable's focus state */
}
```
